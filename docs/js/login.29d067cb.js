"use strict";(self["webpackChunkjingdong"]=self["webpackChunkjingdong"]||[]).push([[535],{2186:function(s,a,e){e.d(a,{Z:function(){return p},S:function(){return i}});var o=e(6252),n=e(3577);const t={class:"toast"};function r(s,a,e,r,c,i){return(0,o.wg)(),(0,o.iD)("div",t,(0,n.zw)(e.toastMessa),1)}var c=e(2262);const i=()=>{const s=(0,c.qj)({show:!1,toastMessa:""}),a=a=>{s.show=!0,s.toastMessa=a,setTimeout((()=>{s.show=!1,s.toastMessa=""}),2e3)},{show:e,toastMessa:o}=(0,c.BK)(s);return{show:e,toastMessa:o,showToast:a}};var u={name:"Toast",props:["toastMessa"]},l=e(3744);const d=(0,l.Z)(u,[["render",r],["__scopeId","data-v-6d51e152"]]);var p=d},3331:function(s,a,e){e.r(a),e.d(a,{default:function(){return M}});var o=e(6252),n=e(9963);const t=s=>((0,o.dD)("data-v-a5400326"),s=s(),(0,o.Cn)(),s),r={class:"container wrapper"},c=t((()=>(0,o._)("div",{class:"palceholder"},[(0,o._)("img",{src:"https://www.dell-lee.com/imgs/vue3/user.png",alt:""})],-1))),i={class:"container__input container__input--account"},u={class:"container__input container__input--password"},l={class:"other--func"},d=t((()=>(0,o._)("a",{href:"#",class:"forget"},"忘记密码",-1)));function p(s,a,e,t,p,w){const h=(0,o.up)("router-link"),g=(0,o.up)("Toast");return(0,o.wg)(),(0,o.iD)("div",r,[c,(0,o._)("div",i,[(0,o.wy)((0,o._)("input",{type:"text",placeholder:"请输入用户名","onUpdate:modelValue":a[0]||(a[0]=s=>t.username=s)},null,512),[[n.nr,t.username]])]),(0,o._)("div",u,[(0,o.wy)((0,o._)("input",{type:"password",placeholder:"请输入密码","onUpdate:modelValue":a[1]||(a[1]=s=>t.password=s)},null,512),[[n.nr,t.password]])]),(0,o._)("button",{class:"login",onClick:a[2]||(a[2]=(...s)=>t.handleLoginClick&&t.handleLoginClick(...s))},"登录"),(0,o._)("div",l,[(0,o.Wm)(h,{to:"./register",class:"register"},{default:(0,o.w5)((()=>[(0,o.Uk)("立即注册")])),_:1}),(0,o.Uk)("|"),d]),t.show?((0,o.wg)(),(0,o.j4)(g,{key:0,toastMessa:t.toastMessa},null,8,["toastMessa"])):(0,o.kq)("",!0)])}e(7658);var w=e(2201),h=e(2262),g=e(4471),m=e(2186);const v=s=>{const a=(0,w.tv)(),e=(0,h.qj)({username:"",password:""}),o=async()=>{try{if(!e.username)return void s("请输入用户名");if(!e.password)return void s("请输入密码");const o=await(0,g.$4)("/api/user/login",{username:e.username,password:e.password});console.log(o),0===o?.errno&&o?.data.verifySuccess?(localStorage.isLoginToken=o?.data.token,a.push({name:"Home"})):s("登录失败")}catch(o){s("请求失败"),console.error(o)}},{username:n,password:t}=(0,h.BK)(e);return{username:n,password:t,handleLoginClick:o}};var _={name:"Login",components:{Toast:m.Z},setup(){const{show:s,toastMessa:a,showToast:e}=(0,m.S)(),{handleLoginClick:o,username:n,password:t}=v(e);return{username:n,password:t,show:s,toastMessa:a,handleLoginClick:o,showToast:e}}},f=e(3744);const k=(0,f.Z)(_,[["render",p],["__scopeId","data-v-a5400326"]]);var M=k}}]);
//# sourceMappingURL=login.29d067cb.js.map