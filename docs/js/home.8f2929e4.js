"use strict";(self["webpackChunkjingdong"]=self["webpackChunkjingdong"]||[]).push([[177],{1618:function(n){(function(e,o){n.exports=o()})(0,(function(){function n(n){var a=[];return n.AMapUI&&a.push(e(n.AMapUI)),n.Loca&&a.push(o(n.Loca)),Promise.all(a)}function e(n){return new Promise((function(e,o){var r=[];if(n.plugins)for(var l=0;l<n.plugins.length;l+=1)-1==t.AMapUI.plugins.indexOf(n.plugins[l])&&r.push(n.plugins[l]);if(i.AMapUI===a.failed)o("前次请求 AMapUI 失败");else if(i.AMapUI===a.notload){i.AMapUI=a.loading,t.AMapUI.version=n.version||t.AMapUI.version,l=t.AMapUI.version;var c=document.body||document.head,p=document.createElement("script");p.type="text/javascript",p.src="https://webapi.amap.com/ui/"+l+"/main.js",p.onerror=function(n){i.AMapUI=a.failed,o("请求 AMapUI 失败")},p.onload=function(){if(i.AMapUI=a.loaded,r.length)window.AMapUI.loadUI(r,(function(){for(var n=0,o=r.length;n<o;n++){var a=r[n].split("/").slice(-1)[0];window.AMapUI[a]=arguments[n]}for(e();s.AMapUI.length;)s.AMapUI.splice(0,1)[0]()}));else for(e();s.AMapUI.length;)s.AMapUI.splice(0,1)[0]()},c.appendChild(p)}else i.AMapUI===a.loaded?n.version&&n.version!==t.AMapUI.version?o("不允许多个版本 AMapUI 混用"):r.length?window.AMapUI.loadUI(r,(function(){for(var n=0,o=r.length;n<o;n++){var a=r[n].split("/").slice(-1)[0];window.AMapUI[a]=arguments[n]}e()})):e():n.version&&n.version!==t.AMapUI.version?o("不允许多个版本 AMapUI 混用"):s.AMapUI.push((function(n){n?o(n):r.length?window.AMapUI.loadUI(r,(function(){for(var n=0,o=r.length;n<o;n++){var a=r[n].split("/").slice(-1)[0];window.AMapUI[a]=arguments[n]}e()})):e()}))}))}function o(n){return new Promise((function(e,o){if(i.Loca===a.failed)o("前次请求 Loca 失败");else if(i.Loca===a.notload){i.Loca=a.loading,t.Loca.version=n.version||t.Loca.version;var r=t.Loca.version,l=t.AMap.version.startsWith("2"),c=r.startsWith("2");if(l&&!c||!l&&c)o("JSAPI 与 Loca 版本不对应！！");else{l=t.key,c=document.body||document.head;var p=document.createElement("script");p.type="text/javascript",p.src="https://webapi.amap.com/loca?v="+r+"&key="+l,p.onerror=function(n){i.Loca=a.failed,o("请求 AMapUI 失败")},p.onload=function(){for(i.Loca=a.loaded,e();s.Loca.length;)s.Loca.splice(0,1)[0]()},c.appendChild(p)}}else i.Loca===a.loaded?n.version&&n.version!==t.Loca.version?o("不允许多个版本 Loca 混用"):e():n.version&&n.version!==t.Loca.version?o("不允许多个版本 Loca 混用"):s.Loca.push((function(n){n?o(n):o()}))}))}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var a;(function(n){n.notload="notload",n.loading="loading",n.loaded="loaded",n.failed="failed"})(a||(a={}));var t={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},i={AMap:a.notload,AMapUI:a.notload,Loca:a.notload},s={AMap:[],AMapUI:[],Loca:[]},r=[],l=function(n){"function"==typeof n&&(i.AMap===a.loaded?n(window.AMap):r.push(n))};return{load:function(e){return new Promise((function(o,s){if(i.AMap==a.failed)s("");else if(i.AMap==a.notload){var c=e.key,p=e.version,d=e.plugins;c?(window.AMap&&"lbs.amap.com"!==location.host&&s("禁止多种API加载方式混用"),t.key=c,t.AMap.version=p||t.AMap.version,t.AMap.plugins=d||t.AMap.plugins,i.AMap=a.loading,p=document.body||document.head,window.___onAPILoaded=function(t){if(delete window.___onAPILoaded,t)i.AMap=a.failed,s(t);else for(i.AMap=a.loaded,n(e).then((function(){o(window.AMap)}))["catch"](s);r.length;)r.splice(0,1)[0]()},d=document.createElement("script"),d.type="text/javascript",d.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+t.AMap.version+"&key="+c+"&plugin="+t.AMap.plugins.join(","),d.onerror=function(n){i.AMap=a.failed,s(n)},p.appendChild(d)):s("请填写key")}else if(i.AMap==a.loaded)if(e.key&&e.key!==t.key)s("多个不一致的 key");else if(e.version&&e.version!==t.AMap.version)s("不允许多个版本 JSAPI 混用");else{if(c=[],e.plugins)for(p=0;p<e.plugins.length;p+=1)-1==t.AMap.plugins.indexOf(e.plugins[p])&&c.push(e.plugins[p]);c.length?window.AMap.plugin(c,(function(){n(e).then((function(){o(window.AMap)}))["catch"](s)})):n(e).then((function(){o(window.AMap)}))["catch"](s)}else if(e.key&&e.key!==t.key)s("多个不一致的 key");else if(e.version&&e.version!==t.AMap.version)s("不允许多个版本 JSAPI 混用");else{var u=[];if(e.plugins)for(p=0;p<e.plugins.length;p+=1)-1==t.AMap.plugins.indexOf(e.plugins[p])&&u.push(e.plugins[p]);l((function(){u.length?window.AMap.plugin(u,(function(){n(e).then((function(){o(window.AMap)}))["catch"](s)})):n(e).then((function(){o(window.AMap)}))["catch"](s)}))}}))},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,t={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},i={AMap:a.notload,AMapUI:a.notload,Loca:a.notload},s={AMap:[],AMapUI:[],Loca:[]}}}}))},1053:function(n,e,o){o.d(e,{Z:function(){return f}});var a=o(6252),t=o(3577);const i={class:"footer"},s=["innerHTML"],r={class:"footer__title"};function l(n,e,o,l,c,p){const d=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",i,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.items,((n,e)=>((0,a.wg)(),(0,a.j4)(d,{to:n.to,key:e,class:(0,t.C_)({footer__item:!0,"footer__item--active":n.to["name"]===l.route.name})},{default:(0,a.w5)((()=>[(0,a._)("div",{innerHTML:n.iconfont,class:"iconfont"},null,8,s),(0,a._)("div",r,(0,t.zw)(n.title),1)])),_:2},1032,["to","class"])))),128))])}var c=o(2201),p={name:"Foot",setup(){const n=[{iconfont:"&#xe6b8;",title:"首页",to:{name:"Home"}},{iconfont:"&#xe789;",title:"购物车",to:{name:"CartList"}},{iconfont:"&#xe64b;",title:"订单",to:{name:"OrderList"}},{iconfont:"&#xe7bd;",title:"我的",to:{name:"Personal"}}],e=(0,c.yj)();return{items:n,route:e}}},d=o(3744);const u=(0,d.Z)(p,[["render",l],["__scopeId","data-v-e02dee1a"]]);var f=u},4325:function(n,e,o){o.d(e,{Z:function(){return h}});var a=o(6252),t=o(3577);const i={class:"shop"},s={class:"container"},r=["src"],l={class:"title"},c={class:"tag"},p={class:"highlight"};function d(n,e,o,d,u,f){const v=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("li",i,[(0,a.Wm)(v,{to:`/shop/${o.item.name?o.item.name:o.item._id}`},{default:(0,a.w5)((()=>[(0,a._)("div",s,[(0,a._)("img",{src:o.item.imgUrl,alt:""},null,8,r)]),(0,a._)("div",{class:(0,t.C_)({shop__info:!0,"shop__info--border":!o.hiddeBorder})},[(0,a._)("h4",l,(0,t.zw)(o.item.name?o.item.name:o.item._id),1),(0,a._)("div",c,[(0,a._)("span",null,"月售:"+(0,t.zw)(o.item.sales),1),(0,a._)("span",null,"起送:"+(0,t.zw)(o.item.expressLimit),1),(0,a._)("span",null,"基础运费:"+(0,t.zw)(o.item.expressPrice),1),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.item.tag,((n,e)=>((0,a.wg)(),(0,a.iD)("span",{key:e},(0,t.zw)(n),1)))),128))]),(0,a._)("div",p,(0,t.zw)(o.item.slogan),1)],2)])),_:1},8,["to"])])}var u={name:"ShopInfo",props:["item","hiddeBorder"]},f=o(3744);const v=(0,f.Z)(u,[["render",d],["__scopeId","data-v-7d836894"]]);var h=v},5182:function(n,e,o){o.r(e),o.d(e,{default:function(){return q}});var a=o(6252);const t={class:"container"},i={class:"wrapper"};function s(n,e,o,s,r,l){const c=(0,a.up)("Top"),p=(0,a.up)("Nearby"),d=(0,a.up)("Foot");return(0,a.wg)(),(0,a.iD)("div",t,[(0,a._)("div",i,[(0,a.Wm)(c),(0,a.Wm)(p)]),(0,a.Wm)(d)])}var r=o(3577),l=o.p+"img/banner.b24c0d9a.jpg";const c=n=>((0,a.dD)("data-v-2fd945a1"),n=n(),(0,a.Cn)(),n),p={class:"header"},d=c((()=>(0,a._)("div",{class:"header__top"},[(0,a._)("span",{class:"iconfont header__position"},""),(0,a._)("span",{class:"header__item"},"上海大学延长校区行健楼10层技园2号楼10层"),(0,a._)("span",{class:"iconfont header__notice"},"")],-1))),u={class:"header__search"},f=c((()=>(0,a._)("a",{href:"#",class:"iconfont"},"",-1))),v=c((()=>(0,a._)("div",{class:"banner"},[(0,a._)("img",{src:l,alt:"后面做成轮播图",class:"banner__img1"})],-1))),h={class:"nav"},g={href:"#"},m={class:"containor"},w=["src"],A={class:"desc"},_=c((()=>(0,a._)("div",{class:"gap"},null,-1)));function M(n,e,o,t,i,s){return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",p,[d,(0,a._)("div",u,[f,(0,a.Uk)(),(0,a._)("input",{type:"text",style:{width:"1.4rem"},placeholder:"山姆会员商店优惠商品",onClick:e[0]||(e[0]=()=>t.handleInputClick(t.router))})])]),v,(0,a._)("div",h,[(0,a._)("ul",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.navInfos.value,((n,e)=>((0,a.wg)(),(0,a.iD)("li",{key:e},[(0,a._)("a",g,[(0,a._)("div",m,[(0,a._)("img",{src:n.imgUrl,alt:""},null,8,w)]),(0,a._)("div",A,(0,r.zw)(n.title),1)])])))),128))])]),_],64)}o(7658);var I=o(1618),y=o.n(I),U=o(2262),L=o(6154);const k=n=>new Promise(((n,e)=>{y().load({key:"ef209f13220abc1e8e1e100d07e5e251",version:"2.0",plugins:["AMap.Geolocation","AMap.Geocoder"]}).then((e=>{n(e)}),(n=>{e(n)}))}));function b(n,e){const o=(0,U.iH)(),a="d8a56b331449cdb2d8eb0021339c853e",t="126.7,37.45";return L.Z.get(`https://restapi.amap.com/v3/geocode/regeo?key=${a}&location=${t}&radius=1000&extensions=all&batch=false`).then((n=>{console.log("res: ",n.data),o.value=n.data})),console.log(o),e}function P(n){return console.log(n),n}const x=n=>new Promise(((e,o)=>{n.plugin("AMap.Geolocation",(function(){const a=new n.Geolocation({enableHighAccuracy:!0,timeout:1e4,offset:[10,20],zoomToAccuracy:!0,position:"RB",extensions:"base",convert:!1});a.getCurrentPosition(((a,t)=>{if("complete"===a){console.log("result",t);const o=b(n,t);e(o)}else P(t),o(t)}))}))})),C=async()=>{const n=async()=>{const n=(0,U.XI)(null),e=await k(n),o=await x(e);return o},e=await n();return e};var D=o(2201),H=o(4471),j={name:"Top",setup(){const n=(0,U.qj)([]),e=async()=>{const e=await(0,H.t5)("/api/nav");0===e?.errno&&e?.data&&(n.value=e.data)};e();const o=(0,D.tv)(),a=n=>{n.push({name:"Search"})},t=(0,U.iH)(),i=async()=>{try{const n=await C();t.value=n}catch(n){}};return i(),{navInfos:n,router:o,handleInputClick:a}}},Z=o(3744);const z=(0,Z.Z)(j,[["render",M],["__scopeId","data-v-2fd945a1"]]);var S=z;const T=n=>((0,a.dD)("data-v-7af9dd3c"),n=n(),(0,a.Cn)(),n),W={class:"nearby"},Y=T((()=>(0,a._)("h3",null,"附近店铺",-1)));function B(n,e,o,t,i,s){const r=(0,a.up)("ShopInfo");return(0,a.wg)(),(0,a.iD)("div",W,[Y,(0,a._)("ul",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.shopInfors,(n=>((0,a.wg)(),(0,a.j4)(r,{key:n._id,item:n},null,8,["item"])))),128))])])}var E=o(4325);const G=()=>{const n=(0,U.iH)([]),e=async()=>{const e=await(0,H.t5)("/api/shop/nearby-list");0===e?.errno&&e?.data?.length&&(n.value=e.data)};return e(),{shopInfors:n}};var J={name:"Nearby",components:{ShopInfo:E.Z},setup(){const{shopInfors:n}=G();return{shopInfors:n}}};const K=(0,Z.Z)(J,[["render",B],["__scopeId","data-v-7af9dd3c"]]);var O=K,F=o(1053),N={name:"Home",components:{Top:S,Nearby:O,Foot:F.Z}};const $=(0,Z.Z)(N,[["render",s],["__scopeId","data-v-ee4e2400"]]);var q=$}}]);
//# sourceMappingURL=home.8f2929e4.js.map